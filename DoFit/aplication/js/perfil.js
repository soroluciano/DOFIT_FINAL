function guardarPerfil(){	$imagen1 = $('#imagen1').val(); //   $imagen2 = $('#imagen2').val();  //  $imagen3 = $('#imagen3').val(); //   $imagen4 = $('#imagen4').val(); //   $imagen5 = $('#imagen5').val();//	var nombreperfil = $('#nmb_inpperfil').val();//	var apellidoperfil = $('#apl_inpperfil').val();//	var direccionperfil = $('#dir_inpperfil').val();//	var latitudperfil = $('#lat_inpperfil').val();//var longitudperfil = $('#lng_inpperfil').val();		$params = 'imagen1='+$imagen1;//+'&imagen2='+$imagen2+'&imagen3='+$imagen3+'&imagen4='+$imagen4+'&imagen5='+$imagen5;	$.ajax({		url: baseurl+"/site/actualizarPerfil",		type: "POST",		data: $params,		dataType: "html",		cache: false,		success: function (rta) {			if(rta==1){				//$('.imgperfil').src="uploads/"+imagendeperfil;				//closeLightboxRegistro();				$('img#imagen1').fadeOut(function(){					document.getElementById('imagenPerfilPropia').src="uploads/"+imagendeperfil;					$('img#imagenPerfilPropia').show(500);										});			}else{				alert(rta);			}		}	});	}function cambiarEstadoInput(id){	document.getElementById(id).style.border="0px";	document.getElementById(id).style.backgroundImage="none";}function editarPerfil(){	$( ".registro").fadeIn(500, function() {		$( ".registrocontain").fadeIn(500, function() {			loadScriptMapsGoogleV3('perfil');		});	});}function closeLightboxRegistro(){	$( ".registrocontain").fadeOut(500, function() {		$( ".registro").fadeOut(500, function() {			});	});}function marcarCampoErroneo(id){	document.getElementById(id).style.backgroundImage="url('"+baseurl+"/img/error.png')";}function marcarCampoErroneo(id){	document.getElementById(id).style.backgroundImage="url('"+baseurl+"/img/error.png')";	document.getElementById(id).style.borderBottom="1px solid red";}function desmarcarCampoErroneo(id){	document.getElementById(id).style.backgroundImage="none";	document.getElementById(id).style.borderBottom="1px solid #000";}/*Sube imagen*/$(document).ready(function(){     $(".messages").hide();    //queremos que esta variable sea global    var fileExtension = "";    //función que observa los cambios del campo file y obtiene información    $(':file').change(function()    {        //obtenemos un array con los datos del archivo        var file = $("#imagen")[0].files[0];        //obtenemos el nombre del archivo        var fileName = file.name;        //obtenemos la extensión del archivo        fileExtension = fileName.substring(fileName.lastIndexOf('.') + 1);        //obtenemos el tamaño del archivo        var fileSize = file.size;        //obtenemos el tipo de archivo image/png ejemplo        var fileType = file.type;        //mensaje con la información del archivo        showMessage("<span class='info'>"+fileName+".</span>");    });     //al enviar el formulario    $('#subirimagenbutton').click(function(){        //información del formulario        var formData = new FormData($(".formulario")[0]);        var message = "";        //hacemos la petición ajax          $.ajax({            url: baseurl+'/php/upload.php',              type: 'POST',            // Form data            //datos del formulario            data: formData,            //necesario para subir archivos via ajax            cache: false,            contentType: false,            processData: false,            //mientras enviamos el archivo            beforeSend: function(){                message = $("<span class='before'>Subiendo la imagen, por favor espere...</span>");                showMessage(message)                    },            //una vez finalizado correctamente            success: function(data){                message = $("<span class='success'>La imagen ha subido correctamente.</span>");                showMessage(message);				               								if(isImage(fileExtension))                {                    $(".showImage").html("<img src='uploads/"+data+"' />");					$("#imagendeperfil").val(data);					$('.messages').html('');					                }            },            //si ha ocurrido un error            error: function(){                message = $("<span class='error'>Ha ocurrido un error.</span>");                showMessage(message);            }        });    });}) //como la utilizamos demasiadas veces, creamos una función para//evitar repetición de códigofunction showMessage(message){    $(".messages").html("").show();    $(".messages").html(message);} //comprobamos si el archivo a subir es una imagen//para visualizarla una vez haya subidofunction isImage(extension){    switch(extension.toLowerCase())    {        case 'jpg': case 'gif': case 'png': case 'jpeg':            return true;        break;        default:            return false;        break;    }}function buscarDireccionPerfil(e){	if (e.keyCode == 13) {        buscarEnMapaPerfil();    }}function buscarEnMapaPerfil(){	 var address= document.getElementById('dir_inpperfil').value;		  	 var geocoder = new google.maps.Geocoder();	 geocoder.geocode({ 'address': address }, function (results, status) {		  if (status == google.maps.GeocoderStatus.OK) {			  ParseLocationPerfil(results[0].geometry.location);		  }else{				alert('No se encontró la dirección ingresada.');		  }	 });}function ParseLocationPerfil(location) {	  var lat = location.lat().toString().substr(0, 12);  var lng = location.lng().toString().substr(0, 12);  $('#lat_inpperfil').val(lat);  $('#lng_inpperfil').val(lng);    var myLatlng = new google.maps.LatLng(lat,lng);  var myOptions = {		zoom: 15,		center: myLatlng,		streetViewControl: false,		mapTypeId: google.maps.MapTypeId.ROADMAP,  }  map = new google.maps.Map(document.getElementById("MapaPerfil"), myOptions);  mapReady(lat,lng,true,'perfil');  }